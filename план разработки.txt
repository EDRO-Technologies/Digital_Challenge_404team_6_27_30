План разработки платформы "Интеллектуальный помощник"
Этап 1: Фундамент и Очистка (Бэкенд) ✅
Цель: Подготовить чистую архитектуру API без лишнего SaaS-функционала.
1. Очистка репозитория:
   * ✅ Удалить старый фронтенд (rm -rf front).
   * ✅ Очистить docker-compose.yml от фронтенда.
   * ✅ Убрать старые эндпоинты workspaces из API.
2. Проектирование Базы Данных:
   * ✅ Создать модели OnboardingTrack, Stage, Task.
   * ✅ Создать модели UserProgress, Quiz, Achievement.
   * ✅ Обновить User (добавить 4 роли: Employee, Mentor, HR, Admin).
3. Настройка Docker:
   * ✅ Обновить конфиги для запуска только Бэкенда и AI-сервиса.
Этап 2: Бизнес-логика Бэкенда (API) 🚧 (ТЕКУЩИЙ ЭТАП)
Цель: Научить сервер работать с квестами, тестами и пользователями.
4. Аутентификация и Роли:
   * ✅ Обновить dependencies.py (функции get_current_hr, get_current_mentor).
   * ✅ Обновить auth.py (регистрация с авто-назначением ролей).
   * ✅ Обновить schemas.py (Pydantic модели для новых таблиц).
5. Логика Квестов (Quests):
   * ✅ Эндпоинт GET /quests/my-track (для сотрудника).
   * ✅ Эндпоинт POST /quests/tracks (для HR).
   * ⬜ Задача: Реализовать POST /quests/submit (проверка выполнения задачи).
6. Логика Тестов (Quizzes):
   * ⬜ Задача: Создать эндпоинты для создания тестов (CRUD).
   * ⬜ Задача: Реализовать логику проверки ответов и начисления баллов.
7. Логика Наставника:
   * ⬜ Задача: Эндпоинт GET /mentees (список подопечных).
   * ⬜ Задача: Эндпоинт POST /approve (ручное подтверждение).
Этап 3: Интеграция AI и Персоны
Цель: Превратить безликого бота в Д.А. Таранова.
8. Настройка Персоны:
   * ⬜ В back-ai изменить системный промпт на "Ты — Д.А. Таранов...".
9. Генератор Тестов:
   * ⬜ Реализовать в back-ai функцию, которая принимает текст документа и возвращает JSON с вопросами.
   * ⬜ Подключить это к бэкенду (POST /quiz/generate).
10. Аватар-API:
   * ⬜ Доработать /chat эндпоинт, чтобы он возвращал не только текст, но и эмоцию аватара (нейтральный, радостный, задумчивый).
Этап 4: Фронтенд — Ядро (С нуля)
Цель: Запустить каркас приложения.
11. Инициализация:
   * ⬜ Создать новый Vite + React проект.
   * ⬜ Настроить Tailwind CSS (цвета Газпрома).
12. Навигация:
   * ⬜ Настроить React Router с защитой роутов (Private Routes) для 4 ролей.
13. Экран Входа:
   * ⬜ Сверстать красивый Login Page с видео-фоном.
Этап 5: Интерфейс Сотрудника (Геймификация)
Цель: Вау-эффект для пользователя.
14. Карта Квеста:
   * ⬜ Компонент визуализации пути (Timeline/Map).
   * ⬜ Анимации открытия новых этапов.
15. Аватар-Чат:
   * ⬜ Интерфейс чата с крупным изображением персонажа.
   * ⬜ Анимация "печатает".
16. Прохождение заданий:
   * ⬜ PDF-вьюер для документов.
   * ⬜ Интерфейс прохождения теста (Quiz UI).
Этап 6: Интерфейсы Управления (HR и Наставник)
Цель: Удобство работы.
17. Кабинет Наставника:
   * ⬜ Список карточек новичков с прогресс-барами.
18. Конструктор Квеста (HR):
   * ⬜ Форма создания этапов и загрузки файлов.
   * ⬜ Кнопка "Сгенерировать тест через ИИ".
19. Аналитика:
   * ⬜ Графики успеваемости.
Этап 7: Финализация
20. Сборка: Настройка Nginx для раздачи фронтенда.
21. Тестирование: Полный проход пути пользователя ("Happy Path").